{% extends "tracker/base.html" %}
{% block content %}
<div class="container mt-4">
    <h2>Gestion des artistes et titres</h2>
    <div class="row">
        <!-- Colonne gauche : Ajouter un artiste -->
        <div class="col-md-6">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                    Ajouter un artiste
                </div>
                <div class="card-body">
                    <form method="post" action="{% url 'artist_create' %}">
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="id_artist_name" class="form-label">Nom de l'artiste</label>
                            <input type="text" name="name" id="id_artist_name" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label for="id_artist_spotify_id" class="form-label">Spotify ID</label>
                            <input type="text" name="spotify_id" id="id_artist_spotify_id" class="form-control">
                        </div>
                        <button type="submit" class="btn btn-success">‚ûï Ajouter l'artiste</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Colonne droite : Ajouter un titre -->
        <div class="col-md-6">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-warning text-dark">
                    Ajouter un titre
                </div>
                <div class="card-body">
                    <form method="post" action="{% url 'track_create' %}">
                        {% csrf_token %}
                        <div class="mb-3">
                            <label for="id_track_name" class="form-label">Nom du titre</label>
                            <input type="text" name="name" id="id_track_name" class="form-control" required>
                        </div>
                        <div class="mb-3">
                            <label for="id_track_artist" class="form-label">Artiste</label>
                            <select name="artist" id="id_track_artist" class="form-select" required>
                                <option value="">-- S√©lectionner un artiste --</option>
                                {% for artist in artists %}
                                  <option value="{{ artist.id }}">{{ artist.name }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="id_track_spotify_id" class="form-label">Spotify ID</label>
                            <input type="text" name="spotify_id" id="id_track_spotify_id" class="form-control">
                        </div>
                        <button type="submit" class="btn btn-primary">‚ûï Ajouter le titre</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Liste des titres existants -->
    <h3 class="mt-5">Titres enregistr√©s</h3>
    {% if tracks %}
    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th>Nom</th>
                <th>Artiste</th>
                <th>Spotify ID</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for track in tracks %}
            <tr>
                <td>{{ track.name }}</td>
                <td>{{ track.artist.name }}</td>
                <td>{{ track.spotify_id|default:"-" }}</td>
                <td>
                    <a href="{% url 'track_update' track.id %}" class="btn btn-sm btn-warning">‚úèÔ∏è Modifier</a>
                    <a href="{% url 'track_delete' track.id %}" class="btn btn-sm btn-danger"
                       onclick="return confirm('Supprimer ce titre ?')">üóëÔ∏è Supprimer</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <p>Aucun titre enregistr√©.</p>
    {% endif %}
</div>
{% endblock %}
